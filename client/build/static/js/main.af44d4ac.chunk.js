(this["webpackJsonpreddit-react"]=this["webpackJsonpreddit-react"]||[]).push([[0],{81:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(12),r=n(1),o=n.n(r),s=n(21),i=n.n(s),l=n(4),d=n(8),u=n(2),b=n(5),j=n(7),m=n.n(j),O=(n(77),n(24)),p=new O.b.Entity("comments",{},{idAttribute:"_id"});p.define({comments:[p]});var h=new O.b.Entity("posts",{comments:[p]},{idAttribute:"_id"}),f="REQUEST_POSTS",g="RECEIVE_POSTS",v="RECEIVE_SINGLE_POSTS",x="LOGIN_REQUEST",y="LOGIN_SUCCESS",k="LOGIN_ERROR",w="SIGNUP_REQUEST",N="SIGNUP_SUCCESS",S="SIGNUP_ERROR",I="CURRENT_USER",E="POST_CREATION_CHANGE_SUBMISSION_TYPE",C="NEW_POST_SUCCESS",T="NEW_POST_REQUEST",_="NEW_COMMENT_SUCCESS",L="NEW_REPLY_REQUEST",P="NEW_REPLY_SUCCESS",R="VOTE_CAST",U="NEXT_PAGE",D="PREV_PAGE",A="DELETE_POST",G="EDIT_POST",z="LOG_OUT",F="CLEAR_ERROR",M="SET_POST_MODAL",V="SPLICED_POST",B="REFRESH_USER",W="UNAUTHORIZED_ERROR",Q="SORT_POSTS",H="CLEAR_LOGIN_MODAL",Y="REQUEST_USER_INFO",J="DARK_MODE_ENABLED",K="DARK_MODE_DISABLED";function X(e){return{type:f}}function Z(e){return function(t,n){var a=n().changeNewSubmissionType.submissionType;e!==a&&t({type:E,postType:e})}}function q(e,t){return function(n,a){var c=t,r=a().posts.byId[c].voteState;return n({type:R,postId:t,point:e,currentVoteState:r}),1===e?m()({url:"/api/posts/vote-up/".concat(c),method:"PUT",withCredentials:!0}):-1===e?m()({url:"/api/posts/vote-down/".concat(c),method:"PUT",withCredentials:!0}):void 0}}function $(e){return function(t){return m()({url:"/api/post/new/",method:"POST",data:e,withCredentials:!0}).then((function(e){200===e.status&&t(function(e){var t=e._id;return e.newPost=!0,function(n){n({type:C,post:e,id:t})}}(e.data))}))}}function ee(e,t){return Object(O.a)(e.posts,[h])}function te(e,t,n,a){return function(c){return c(X()),m.a.get("/api/posts/".concat(n&&n.sort?n.sort:"").concat(e?"?".concat(e,"=").concat(t):""),{withCredentials:!0}).then((function(e){var t=ee({posts:e.data.posts});return c({type:n&&n.sort&&"click"===a?Q:g,normalizedData:t,offset:e.data.offset,sort:n&&n.sort?n.sort:"default"}),e.data}))}}function ne(e,t){return function(n){return n(X()),new Promise((function(a){m()({url:"/api/posts/".concat(t&&t.sort?t.sort:"","?page[size]=",10,"&after=").concat(e),method:"GET",withCredentials:!0}).then((function(e){if(200===e.status){var c=ee({posts:e.data.posts});n({type:U,normalizedData:c,offset:e.data.offset,sort:t.sort?t.sort:"default"}),a("completed")}}))}))}}function ae(e){return function(t){return t({type:"REQUEST_SINGLE_POST"}),m()({url:"/api/post/".concat(e),method:"GET",withCredentials:!0}).then((function(e){var n=ee({posts:[e.data]});t({normalizedData:n,type:v})}))}}var ce=n(22),re=n.n(ce),oe=n(27),se=0;function ie(){return function(e){return m()({url:"/api/logout",withCredentials:!0,method:"POST"}).then((function(e){if(200===e.status)return localStorage.removeItem("accessToken"),e}))}}function le(e,t){return function(n){return n({type:x}),m()({withCredentials:!0,method:"POST",data:{username:e,password:t},url:"/api/login"}).then((function(e){if(200===e.status)return n(function(e,t){return function(n){n({type:y,username:e,id:t}),Promise.resolve("success")}}(e.data.username,e.data._id)),e.data.jwt_token})).then((function(e){return localStorage.setItem("accessToken",e),"login"})).catch((function(){n({type:W})}))}}function de(e,t,n){return function(a){return a({type:w}),m()({url:"/api/signup",data:{username:e,password:t,passwordConfirm:n},method:"POST"}).then((function(e){if(200===e.status)return a({type:N}),"signup"})).catch((function(e){var c,r=e.response.data;t!==n&&(c="Passwords do not match"),a({type:S,error:r,passwordError:c})}))}}m.a.interceptors.request.use((function(e){var t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),m.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;if(401!==e.response.status&&403!==e.response.status||t._retry||!(se<=2)||"/api/refresh"===e.config.url)return Promise.reject(e);se+=1,t._retry=!0,m()({url:"/api/refresh",method:"POST",withCredentials:!0}).then((function(e){if(e.data)return localStorage.setItem("accessToken",e.data.jwt_token),m.a.defaults.headers.common.Authorization="Bearer "+e.jwt_token,t.headers.Authorization="Bearer "+e.data.jwt_token,m()(t)}))}));var ue=n(9),be=n.p+"static/media/image-placeholder.1c6a32aa.svg",je=n.p+"static/media/link-post.cdb86b79.svg",me=n.p+"static/media/reddit-default.f7d549ef.svg",Oe=n(46),pe=n.n(Oe);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var ge=r.createElement("g",{id:"Page-1"},r.createElement("g",{id:"Desktop-(Card)",transform:"translate(-516.000000, -289.000000)"},r.createElement("g",{id:"Group-6",transform:"translate(428.000000, 154.000000)"},r.createElement("g",{id:"Group",transform:"translate(16.000000, 134.000000)"},r.createElement("g",{id:"down-arrow-copy",transform:"translate(72.000000, 1.000000)"},r.createElement("path",{d:"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z",id:"Path"}))))));function ve(e,t){var n=e.title,a=e.titleId,c=fe(e,["title","titleId"]);return r.createElement("svg",he({width:"13px",height:"14px",viewBox:"0 0 13 14",ref:t,"aria-labelledby":a},c),void 0===n?r.createElement("title",{id:a},"down-arrow copy"):n?r.createElement("title",{id:a},n):null,ge)}var xe=r.forwardRef(ve);n.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var we=r.createElement("g",{id:"Page-1"},r.createElement("g",{id:"Desktop-(Card)",transform:"translate(-444.000000, -289.000000)"},r.createElement("g",{id:"Group-6",transform:"translate(428.000000, 154.000000)"},r.createElement("g",{id:"Group",transform:"translate(16.000000, 134.000000)"},r.createElement("g",{id:"down-arrow",transform:"translate(6.500000, 8.000000) scale(1, -1) translate(-6.500000, -8.000000) translate(0.000000, 1.000000)"},r.createElement("path",{d:"M12.2275497,7.76096702 C12.1820052,7.65192943 12.0757255,7.58077755 11.957786,7.58077755 L8.75858504,7.58077755 L8.75858504,0.291577829 C8.75858504,0.130631897 8.62778141,0 8.4666239,0 L3.79538263,0 C3.63422512,0 3.50342149,0.130631897 3.50342149,0.291577829 L3.50342149,7.58080489 L0.291958509,7.58080489 C0.174019021,7.58080489 0.0677393658,7.65195676 0.0221948522,7.76042033 C-0.0227748808,7.86945792 0.00174908806,7.99484158 0.0852564863,8.07823934 L5.90969908,13.9142788 C5.96457693,13.9690846 6.03875099,14 6.1164011,14 C6.19405121,14 6.26822527,13.9690846 6.32310313,13.9148528 L12.1644881,8.07881337 C12.2479955,7.99538827 12.2730942,7.87003194 12.2275497,7.76096702 Z",id:"Path"}))))));function Ne(e,t){var n=e.title,a=e.titleId,c=ke(e,["title","titleId"]);return r.createElement("svg",ye({width:"13px",height:"14px",viewBox:"0 0 13 14",ref:t,"aria-labelledby":a},c),void 0===n?r.createElement("title",{id:a},"down-arrow"):n?r.createElement("title",{id:a},n):null,we)}var Se=r.forwardRef(Ne),Ie=(n.p,function(e){var t=e.post,n=e.history,c=Object(r.useState)(!1),o=Object(b.a)(c,2),s=o[0],i=o[1],d=Object(r.useState)(!0),u=Object(b.a)(d,2)[1],j=n.match.params.sort,O=Object(l.c)(),p=Object(l.d)((function(e){return e.display.display})),h=Object(l.d)((function(e){return e.currentUser._id})),f=Object(l.d)((function(e){return e.listings.status})),g=function(e){O(function(e,t){return function(n){return n({type:A,postId:e,params:t||"default"}),m()({url:"/api/delete/".concat(e),method:"DELETE",withCredentials:!0})}}(e,"post"===j?null:j)),u(!1)};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"card-container ".concat("dark"===p?"dark-mode-card":""," "),children:[Object(a.jsxs)("div",{className:"card-content-container ".concat("loading"===f?"content-loading-mask":""),children:[Object(a.jsxs)("p",{className:"card-author",children:["u/",t.author.username]}),Object(a.jsx)("h4",{className:"card-title",children:Object(a.jsx)(ue.a,{onClick:function(){O(ae(t._id))},to:{pathname:"/post/".concat(t._id),state:{modal:!0}},children:t.title})}),Object(a.jsxs)("div",{className:"vote-container",children:[Object(a.jsx)("li",{children:Object(a.jsx)(Se,{className:1===t.voteState?"home-vote-color":"".concat("dark"===p?"dark-mode-arrow":""),alt:""})}),Object(a.jsx)("li",{children:t.voteTotal}),Object(a.jsx)("li",{children:Object(a.jsx)(xe,{className:-1===t.voteState?"home-vote-color":"".concat("dark"===p?"dark-mode-arrow":""),alt:""})})]})]}),h===t.author._id?Object(a.jsx)("div",{className:"edit-del-container",children:Object(a.jsxs)("div",{className:"edit-del-content",children:[s?Object(a.jsxs)("div",{className:"delete-confirm-container",children:[Object(a.jsx)("div",{children:Object(a.jsx)("p",{className:"delete-confirm",children:"Delete?"})}),Object(a.jsx)("li",{onClick:function(){return g(t._id)},className:"delete-button-yes",children:"Yes"}),Object(a.jsx)("li",{className:"delete-button-slash",children:"/"}),Object(a.jsx)("li",{className:"delete-button-yes",children:"No"})]}):null,Object(a.jsx)("button",{onClick:function(){i(!s)},className:"delete-button",children:Object(a.jsx)(pe.a,{className:"del-svg"})})]})}):null]},t._id)})}),Ee=o.a.memo(Ie,(function(e,t){if(e.post.voteTotal===t.post.voteTotal)return!0})),Ce=function(e){var t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(""),i=Object(b.a)(s,2),d=i[0],u=i[1],j=Object(l.c)(),m=Object(l.d)((function(e){return e.display.display})),O=(Object(l.d)((function(e){return e.login.isLoggedIn})),Object(l.d)((function(e){return e.login.err}))),p=function(e){"Enter"!==e.key&&"click"!==e.type||j(le(c,d)).then((function(e){"login"===e&&window.location.reload()}))};return Object(a.jsx)("div",{className:"login-modal-wrapper",children:Object(a.jsxs)("div",{className:"login-card-modal ".concat("dark"===m?"dark-mode-border":""),children:[Object(a.jsxs)("div",{className:"login-modal-title-exit-container",children:[Object(a.jsx)("p",{className:"login-modal-title ".concat("dark"===m?"dark-mode-font":""),children:"Login"}),Object(a.jsx)("button",{onClick:e.close,className:"login-cancel-button ".concat("dark"===m?"dark-mode-font":""),children:"X"})]}),Object(a.jsxs)("div",{className:"login-input-container",children:[Object(a.jsx)("input",{onChange:function(e){o(e.target.value)},className:"login-input ".concat("dark"===m?"dark-mode-input":""),placeholder:"username",type:"text"}),Object(a.jsx)("input",{onKeyDown:p,onChange:function(e){u(e.target.value)},className:"login-input ".concat("dark"===m?"dark-mode-input":""),placeholder:"password",type:"password"})," ",Object(a.jsx)("p",{className:"signup-error",children:O}),Object(a.jsx)("button",{onClick:p,className:"login-button",children:"Log in"})]})]})})},Te=function(e){var t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(""),i=Object(b.a)(s,2),u=i[0],j=i[1],m=Object(r.useState)(""),O=Object(b.a)(m,2),p=O[0],h=O[1],f=Object(l.d)((function(e){return e.display.display})),g=Object(l.c)(),v=Object(l.d)((function(e){return e.login.isLoggedIn})),x=Object(l.d)((function(e){return e.signup.err})),y=Object(l.d)((function(e){return e.signup.passwordError}));return v&&window.location.reload(),Object(r.useEffect)((function(){g({type:w})}),[g]),Object(a.jsx)("div",{className:"login-modal-wrapper",children:Object(a.jsxs)("div",{className:"login-card-modal ".concat("dark"===f?"dark-mode-border":""),children:[Object(a.jsxs)("div",{className:"login-modal-title-exit-container",children:[Object(a.jsx)("p",{className:"login-modal-title ".concat("dark"===f?"dark-mode-font":""),children:"Sign up"}),Object(a.jsx)("button",{onClick:e.close,className:"login-cancel-button ".concat("dark"===f?"dark-mode-font":""),children:"X"})]}),Object(a.jsxs)("div",{className:"login-input-container",children:[Object(a.jsx)("input",{onChange:function(e){o(e.target.value)},onClick:function(){g({type:F})},className:"login-input ".concat("dark"===f?"dark-mode-input":""),placeholder:"username",type:"text"}),Object(a.jsx)("p",{className:"signup-error",children:x}),Object(a.jsx)("input",{onChange:function(e){j(e.target.value)},className:"login-input ".concat("dark"===f?"dark-mode-input":""),placeholder:"password",type:"password"}),Object(a.jsx)("p",{className:"signup-error",children:y}),Object(a.jsx)("input",{onChange:function(e){h(e.target.value)},className:"login-input ".concat("dark"===f?"dark-mode-input":""),placeholder:"Confirm your password",type:"password"}),Object(a.jsx)("button",{onClick:function(){g(de(c,u,p)).then((function(e){"signup"===e&&d.a}))},className:"login-button",children:"Sign up"})]})]})})};var _e=function(e){var t,n=Object(l.c)(),c=Object(l.d)((function(e){return e.posts.byId})),o=Object(l.d)((function(e){return e.display.display})),s=Object(r.useState)(!1),i=Object(b.a)(s,2),u=i[0],j=i[1],m=Object(d.h)(),O=Object(l.d)((function(e){return e.login.isLoggedIn})),p=Object(l.d)((function(e){return e.posts.status})),h=Object(d.i)(),f=Object(l.d)((function(e){return e.listings.listingOrder})),g=Object(l.d)((function(e){return e.listings.sortOrder})),v=f[g],x=e.history.location.search,y=Object(l.d)((function(e){return e.posts.offset})),k=new URLSearchParams(x).get("after"),w=new URLSearchParams(x).get("before"),N=k?"after":w&&"before",S=k||w;v&&(t=v.map((function(e){return c[e]})));var I=Object(r.useCallback)((function(e){var a=!0,c=new IntersectionObserver((function(t,c){t[0].intersectionRatio>0&&a&&y&&(c.disconnect(),n(ne(y,h)).then((function(t){a=!1,"completed"===t&&c.observe(e)})))}),{threshold:[0]});t.length>0&&e&&"post"!==h.sort?c.observe(e):c.disconnect()}),[y]);Object(r.useEffect)((function(){var e=m.pathname.split("/");"post"===h.sort&&!1===u?n(ae(e[2])):!1===u&&n(te(N,S,"post"===h.sort?null:h)).then((function(e){e.posts.length>0&&j(!0)}))}),[h.sort]);var C=f[g],_=function(t){var a;O||e.handleShowLogin(),n((a=t,function(e){e({type:E,postType:a})})),n({type:T})};return C?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"home-wrapper ".concat("dark"===o?"dark-mode":""),children:[e.showSignup?Object(a.jsx)(Te,{}):null,Object(a.jsxs)("div",{className:"new-post-container ".concat("dark"===o?"dark-mode-border":""),children:[Object(a.jsx)(ue.a,{to:"",children:Object(a.jsx)("img",{className:"new-post-profile-image ".concat("dark"===o?"dark-mode-border":""),src:me,alt:""})}),Object(a.jsx)(ue.a,{onClick:function(){return _("post")},to:O?"/new-post":"",className:"new-post-input-container",children:Object(a.jsx)("input",{placeholder:"Create Post",className:"new-post-input ".concat("dark"===o?"dark-mode-border":""),type:"text"})}),Object(a.jsx)(ue.a,{onClick:function(){return _("media")},to:O?"/new-post?media=true":"",children:Object(a.jsx)("img",{className:"post-option",src:be,alt:""})}),Object(a.jsx)(ue.a,{onClick:function(){return _("link")},to:O?"/new-post?link=true":"",children:Object(a.jsx)("img",{className:"post-option",src:je,alt:""})})]}),Object(a.jsxs)("div",{className:"categories-container ".concat("dark"===o?"dark-mode-border":""),children:[Object(a.jsx)(ue.a,{to:"/hot",className:"".concat("dark"===o?"dark-mode-border":""),onClick:function(){return n(te(N,S,{sort:"hot"},"click"))},children:"Hot"}),Object(a.jsx)(ue.a,{className:"".concat("dark"===o?"dark-mode-border":""),to:"/new",onClick:function(){return n(te(N,S,{sort:"new"},"click"))},children:"New"}),Object(a.jsx)(ue.a,{className:"".concat("dark"===o?"dark-mode-border":""),to:"/top",onClick:function(){return n(te(N,S,{sort:"top"},"click"))},children:"Top"})]}),Object(a.jsxs)("div",{className:"posts-container",children:[t.map((function(t){if(t)return Object(a.jsx)(Ee,{history:e,post:t},t._id)})),Object(a.jsx)("div",{className:"page-set-container"})]})]}),Object(a.jsx)("div",{className:"loading-container",children:Object(a.jsx)("div",{className:"loading"===p?"lds-dual-ring":"inactive"})}),Object(a.jsx)("span",{ref:I})]}):Object(a.jsx)("div",{})},Le=n(32),Pe=n.n(Le),Re=n.p+"static/media/magnifying-glass.4af3fe67.svg",Ue=n.p+"static/media/Triangle.145cb339.svg";var De=Object(d.j)((function(e){var t,n=Object(r.useState)(!1),c=Object(b.a)(n,2),o=c[0],s=c[1],i=Object(r.useState)(""),d=Object(b.a)(i,2),u=d[0],j=d[1],m=Object(r.useState)(!1),O=Object(b.a)(m,2),p=(O[0],O[1],Object(r.useState)([])),h=Object(b.a)(p,2),f=h[0],g=h[1],v=Object(r.useState)(!1),x=Object(b.a)(v,2),y=x[0],k=x[1],w=Object(l.d)((function(e){return e.currentUser})),N=Object(l.d)((function(e){return e.login.isLoggedIn})),S=Object(l.d)((function(e){return e.currentModal})),I=Object(l.c)(),E=Object(l.d)((function(e){return e.posts.allIds})),C=Object(l.d)((function(e){return e.posts.byId})),T=E.map((function(e){return C[e]})),_=Object(l.d)((function(e){return e.display.display})),L=function(){I({type:"dark"===_?K:J})},P=function(){var e=Object(oe.a)(re.a.mark((function e(n){var a,c;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(n.target.value),t=n.target.value,e.next=4,t.trimStart();case 4:return a=e.sent,e.next=7,T.filter((function(e){return new RegExp("^"+a,"gi").test(e.title)}));case 7:c=e.sent,g(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){k(!y)},U=function(){y&&k(!1)};return Object(r.useEffect)((function(){return document.title="Readit",document.body.addEventListener("click",U),function(){document.body.removeEventListener("click",U)}}),[U]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"navbar-wrapper ",children:Object(a.jsx)("div",{className:"navbar-container ".concat("dark"===_?"dark-mode-nav":""," "),children:Object(a.jsxs)("div",{className:"navbar-content",children:[Object(a.jsx)("li",{children:Object(a.jsx)(ue.a,{to:{pathname:"/"},replace:"/"===e.history.location.pathname,onClick:function(){document.body.style.overflow="",S.post.newPost,"/"===e.match.path&&I(te())},className:"logo",children:"readit"})}),Object(a.jsxs)("div",{className:"search-bar-container",children:[Object(a.jsx)("input",{onClick:R,onChange:function(e){return P(e)},className:"search-bar ".concat("dark"===_?"dark-mode-input":""," "),placeholder:"Search",type:"text"}),Object(a.jsx)("span",{className:"search-icon",children:Object(a.jsx)("img",{src:Re,alt:""})}),Object(a.jsx)("div",{onClick:function(e){return R()},className:"".concat(y?"search-dropdown-container ".concat("dark"===_?"dark-mode-search-dropdown":""):"inactive"),children:/^\s+(?=[a-z0-9])|^[a-z0-9]/g.test(u)?f.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)("div",{className:"search-dropdown-content ".concat(y?null:"hide-search"," "),children:Object(a.jsx)(ue.a,{className:"search-content-item ".concat("dark"===_?"dark-mode-dropdown-item":""),to:"/post/".concat(e._id),children:e.title})},e._id)]})})):null})]}),N?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Pe.a,{className:"dark"===_?"outline-visible":"brightness-icon",onClick:L}),Object(a.jsxs)("div",{className:"profile-wrapper",children:[Object(a.jsxs)("button",{onClick:function(){s(!o)},className:"navbar-profile-container ".concat("dark"===_?"dark-mode-border":""),children:[Object(a.jsxs)("div",{className:"navbar-logo-text",children:[Object(a.jsx)("img",{className:"default-profile-image ".concat("dark"===_?"dark-mode-border":""),style:{backgroundColor:"rgba(0, 0, 0, 0.1)"},src:me,alt:""}),Object(a.jsx)("p",{className:"navbar-profile-username ".concat("dark"===_?"dark-mode-font":""),children:w.username})]}),Object(a.jsx)("img",{className:"navbar-profile-triangle",src:Ue,alt:""})]}),o?Object(a.jsx)("div",{className:"navbar-dropdown-container",children:Object(a.jsx)("ul",{className:"navbar-dropdown",children:Object(a.jsx)("li",{children:Object(a.jsx)("button",{onClick:function(){I(ie()).then((function(e){200===e.status&&window.location.reload()}))},className:"navbar-dropdown-options ".concat("dark"===_?"navbar-dropdown-options-dark":""),children:"Logout"})})})}):null]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Pe.a,{className:"dark"===_?"outline-visible":"brightness-icon",onClick:L}),Object(a.jsxs)("div",{className:"auth-button-container-navbar",children:[Object(a.jsx)("button",{className:"dark"===_?"dark-mode":"",onClick:e.handleShowLogin,children:"log in"}),Object(a.jsx)("button",{onClick:e.handleShowSignup,children:"sign up"})]}),Object(a.jsx)("div",{className:"hamburger-container",children:Object(a.jsxs)("div",{className:"hamburger-button-container",children:[Object(a.jsx)("input",{type:"checkbox",id:"trigger",className:"burger-input"}),Object(a.jsx)("label",{htmlFor:"trigger",className:"burger-label ".concat("dark"===_?"dark-mode-burger":""," "),children:Object(a.jsx)("div",{className:"main-trigger-icon-container",children:Object(a.jsx)("span",{className:"main-trigger-icon"})})}),Object(a.jsxs)("div",{className:"hamburger-item-container",children:[Object(a.jsx)("li",{className:"hamburger-item ".concat("dark"===_?"dark-mode-dropdown-item":""," "),children:Object(a.jsx)("button",{className:"hamburger-item-button",onClick:e.handleShowLogin,children:"log in"})}),Object(a.jsx)("li",{className:"hamburger-item ".concat("dark"===_?"dark-mode-dropdown-item":""," "),children:Object(a.jsx)("button",{className:"hamburger-item-button",onClick:e.handleShowSignup,children:"sign up"})})]})]})})]})]})})}),Object(a.jsx)("div",{})]})})),Ae=function(){var e=new URLSearchParams(Object(d.h)().search),t=e.get("media"),n=e.get("link"),c=Object(l.d)((function(e){return e.changeNewSubmissionType.submissionType})),o=Object(d.g)(),s=Object(l.c)(),i=Object(r.useState)(""),u=Object(b.a)(i,2),j=u[0],m=u[1],O=Object(r.useState)(""),p=Object(b.a)(O,2),h=p[0],f=p[1],g=Object(r.useState)(""),v=Object(b.a)(g,2),x=v[0],y=v[1],k=Object(l.d)((function(e){return e.posts.submitted})),w=Object(l.d)((function(e){return e.login.fetching})),N=(Object(l.d)((function(e){return e.login.isLoggedIn})),Object(l.d)((function(e){return e.posts.reRouteId}))),S=Object(l.d)((function(e){return e.display.display}));if(Object(r.useEffect)((function(){}),[]),Object(r.useEffect)((function(){t?c="media":n&&(c="link"),k&&o.push("/post/".concat(N))}),[k]),w)return Object(a.jsx)("div",{});return Object(a.jsx)("div",{className:"newpost-wrapper ".concat("dark"===S?"dark-mode":""),children:Object(a.jsxs)("div",{className:"newpost-container",children:[Object(a.jsx)("p",{className:"newpost-title",children:"Create a post"}),Object(a.jsxs)("div",{className:"newpost-template ".concat("dark"===S?"navbar-dropdown-options-dark":""),children:[Object(a.jsxs)("div",{className:"newpost-options",children:[Object(a.jsx)("button",{className:"post"===c?"submit-type-button ".concat("selectedType"," ","dark"===S?"dark-mode-submit":""):"submit-type-button ".concat("dark"===S?"dark-mode-submit":""," "),onClick:function(){window.history.replaceState("page2","Title","/new-post"),s(Z("post"))},children:"Post"}),Object(a.jsxs)("button",{className:"media"===c?"submit-type-button ".concat("selectedType"," ","dark"===S?"dark-mode-submit":""):"submit-type-button ".concat("dark"===S?"dark-mode-submit":""," "),onClick:function(){s(Z("media")),window.history.replaceState("page2","Title","/new-post")},children:["Images ","&"," Video"]}),Object(a.jsx)("button",{className:"link"===c?"submit-type-button ".concat("selectedType"," ","dark"===S?"dark-mode-submit":""):"submit-type-button ".concat("dark"===S?"dark-mode-submit":""," "),onClick:function(){s(Z("link")),window.history.replaceState("page2","Title","/new-post")},children:"Link"})]}),Object(a.jsxs)("form",{action:"",children:[Object(a.jsx)("div",{className:"newpost-title-container",children:Object(a.jsx)("input",{onChange:function(e){m(e.target.value)},placeholder:"Title",className:"newpost-title ".concat("dark"===S?"dark-mode-input":""),type:"text"})}),Object(a.jsxs)("div",{className:"newpost-entry-container",children:["media"===c?Object(a.jsx)("div",{className:"upload-input-container",children:Object(a.jsx)("input",{onChange:function(e){y(e.target.files[0])},className:"upload-input",type:"file",name:"",id:"file-input"})}):Object(a.jsx)("textarea",{onChange:function(e){f(e.target.value)},placeholder:"Text(optional)",className:"newpost-entry ".concat("dark"===S?"dark-mode-input":""),name:"",id:"",cols:"30",rows:"10"}),Object(a.jsx)("div",{className:"submission-button-container",children:Object(a.jsx)("button",{type:"submit",onClick:function(e){return function(e){e.preventDefault();var t=new FormData;t.append("title",j),t.append("content",h),t.append("file",x),s($(t))}(e)},className:"submission-buttons ".concat("dark"===S?"dark-mode-button":""),children:"Post"})})]})]})]})]})})};function Ge(e,t){return function(n,a){return n({type:"NEW_COMMENT_REQUEST"}),m()({url:"/api/comment/new",method:"POST",data:{content:e,postId:t},withCredentials:!0}).then((function(e){n(function(e,t,n){return function(a,c){a({type:_,savedComment:e,postId:t,parentId:n})}}(e.data,t))}))}}function ze(e,t,n){return function(a,c){var r=n,o=c().comments.byId[r].voteState;a({type:R,point:e,commentId:n,currentVoteState:o}),1===e?m()({url:"/api/comment/vote-up",method:"PUT",data:{postId:t,commentId:n},withCredentials:!0}):-1===e&&m()({url:"/api/comment/vote-down",method:"PUT",data:{postId:t,commentId:n},withCredentials:!0})}}var Fe=n.p+"static/media/down-arrow.c9c98d5d.svg";function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var Be=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2 c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067 S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2 c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z"}))),We=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937 c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585 c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13 l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z"}))),Qe=r.createElement("g",null),He=r.createElement("g",null),Ye=r.createElement("g",null),Je=r.createElement("g",null),Ke=r.createElement("g",null),Xe=r.createElement("g",null),Ze=r.createElement("g",null),qe=r.createElement("g",null),$e=r.createElement("g",null),et=r.createElement("g",null),tt=r.createElement("g",null),nt=r.createElement("g",null),at=r.createElement("g",null),ct=r.createElement("g",null),rt=r.createElement("g",null);function ot(e,t){var n=e.title,a=e.titleId,c=Ve(e,["title","titleId"]);return r.createElement("svg",Me({viewBox:"0 0 477.873 477.873",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Be,We,Qe,He,Ye,Je,Ke,Xe,Ze,qe,$e,et,tt,nt,at,ct,rt)}var st=r.forwardRef(ot),it=(n.p,n.p+"static/media/up-arrow.927fb299.svg"),lt=function(e){var t=e.comment,n=e.handleShowLogin,c=Object(r.useState)([]),o=Object(b.a)(c,2),s=o[0],i=o[1],d=Object(l.d)((function(e){return e.display.display})),u=Object(l.d)((function(e){return e.login.isLoggedIn})),j=Object(l.c)(),O=Object(r.useState)(""),p=Object(b.a)(O,2),h=p[0],f=p[1],g=Object(r.useState)(!1),v=Object(b.a)(g,2),x=v[0],y=v[1];return Object(r.useEffect)((function(){for(var e=[],n=0;n<=t.depth;n++)e.push(Object(a.jsx)("div",{style:{left:0===n?0:23*n},className:"thread-line-container",children:Object(a.jsx)("li",{className:"thread-line"})},t._id+"line"+n));i(e)}),[t]),t&&"number"===typeof t.depth?Object(a.jsxs)("div",{style:{position:"relative",paddingLeft:0===t.depth?15:23*t.depth+15,paddingTop:"10px"},children:[s.map((function(e){return e})),Object(a.jsxs)("div",{className:"comment-vote-title-container",children:[" ",Object(a.jsx)("div",{className:"comment-vote-container",children:Object(a.jsxs)("div",{className:"comment-vote-button-container",children:[Object(a.jsx)(Se,{className:1===t.voteState?"comment-vote-button-color":"".concat("dark"===d?"dark-mode-arrow":"comment-vote-button"),src:it,onClick:function(){u?j(ze(1,t.postId,t._id)):n()},alt:""}),Object(a.jsx)("span",{className:"dark"===d?"dark-mode-font":"",children:t.voteTotal}),Object(a.jsx)(xe,{className:-1===t.voteState?"comment-vote-button-color":"".concat("dark"===d?"dark-mode-arrow":"comment-vote-button"),src:Fe,onClick:function(){u?j(ze(-1,t.postId,t._id)):n()}})]})}),Object(a.jsxs)("div",{className:"comment-container",children:[Object(a.jsx)("p",{className:"comment-author ".concat("dark"===d?"dark-mode-font":""),children:t.authorName}),Object(a.jsx)("div",{className:"parent-comment ".concat("dark"===d?"dark-mode-font":""),children:t.content}),Object(a.jsxs)("div",{className:"reply-button-container",children:[u?Object(a.jsx)("button",{onClick:function(){y(!x),j({type:L,test:{}})},className:"reply-button",children:"Reply"}):null,x?Object(a.jsxs)("div",{className:"new-comment-container",children:[Object(a.jsx)("textarea",{value:h,onChange:function(e){f(e.target.value)},placeholder:"What are your thoughts?",className:"new-comment reply-textarea",rows:"6"}),Object(a.jsx)("div",{className:"submit-comment-container",children:Object(a.jsx)("button",{onClick:function(){var e=t._id;j(function(e,t,n){return function(a,c){return m()({url:"/api/comments/".concat(n,"/replies"),method:"POST",data:{content:e,postId:t},withCredentials:!0}).then((function(e){a({type:P,reply:e.data,postId:t,commentId:n})}))}}(h,t.postId,e)),y(!1),f("")},className:"submit-comment-button",children:"Reply"})})]}):null]})]})]})]}):null},dt=o.a.memo(lt,(function(e,t){if(e.comment.voteState===t.comment.voteState)return!0}));var ut=Object(l.b)((function(e,t){var n=t.match.params.id;return{post:e.posts.byId[n]}}))((function(e){var t=Object(d.i)(),n=Object(l.c)(),c=Object(d.g)(),o=Object(r.useState)(""),s=Object(b.a)(o,2),i=s[0],u=s[1],j=Object(r.useState)(!1),O=Object(b.a)(j,2),p=O[0],h=O[1],f=Object(r.useState)(""),g=Object(b.a)(f,2),v=g[0],x=g[1],y=Object(l.d)((function(e){return e.currentUser._id})),k=Object(l.d)((function(e){return e.comments.byId})),w=Object(l.d)((function(e){return e.login.isLoggedIn})),N=e.post,S=function(){c.push("/")},I=Object(l.d)((function(e){return e.display.display})),E=function(e){var t,a;n((t=e,a=v,function(e){return e({type:G,postId:t,content:a}),m()({url:"/api/edit/".concat(t),method:"PUT",withCredentials:!0,data:{content:a}})})),h(!1)};if(!N)return Object(a.jsx)("div",{});var C=new Date(N.createdAt),T=new Intl.DateTimeFormat("en-US",{}).format(C),_=[],L=N.comments.map((function(e){return k[e]}));return L.length>0&&function e(t){for(var n=0;n<t.length;n++)_.push(t[n]),t[n].comments.length>0&&e(t[n].comments.map((function(e){return k[e]})));return[]}(L),Object(a.jsxs)("div",{onClick:S,className:"modal-wrapper ".concat("dark"===I?"dark-mode":""),children:[Object(a.jsx)("input",{type:"checkbox",id:"trigger",className:"burger-input"}),Object(a.jsx)("label",{htmlFor:"trigger",className:"close-label ".concat("dark"===I?"dark-mode-burger":""),children:Object(a.jsx)("div",{onClick:S,className:"main-close-icon-container",children:Object(a.jsx)("span",{className:"main-close-icon"})})}),Object(a.jsx)("div",{onClick:function(e){e.stopPropagation()},className:"card-modal ".concat("dark"===I?"dark-mode-border":""),children:N.author?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{className:"card-modal-author",children:[" ","u/",N.author.username]}),Object(a.jsx)("p",{className:"modal-date ".concat("dark"===I?"dark-mode-font":""),children:T}),Object(a.jsx)("h4",{className:"card-modal-title ".concat("dark"===I?"dark-mode-font":""),children:N.title}),y===N.author._id?Object(a.jsxs)("div",{className:"edit-container",children:[Object(a.jsx)("p",{className:"card-modal-content ".concat(p?"inactive":null," "),children:N.content}),Object(a.jsx)("textarea",{onChange:function(e){x(e.target.value)},className:p?"edit-text-area":"inactive",value:v}),Object(a.jsxs)("div",{className:p?"edit-button-container":"inactive",children:[Object(a.jsx)("button",{onClick:function(){return E(N._id)},className:"edit-submit-button",children:"Save"}),Object(a.jsx)("button",{onClick:function(){h(!1)},className:"edit-cancel-button",children:"Cancel"})]}),Object(a.jsx)("button",{className:"edit-button ".concat(p?"inactive":null),onClick:function(){h(!0)},children:Object(a.jsx)(st,{})})]}):null,Object(a.jsx)("div",{className:"post-image-container",children:Object(a.jsx)("img",{className:"post-image",src:e.post.image,alt:""})}),y?Object(a.jsxs)("div",{className:"new-comment-container",children:[Object(a.jsx)("textarea",{className:"new-comment",name:"",id:"",placeholder:"What are your thoughts?",rows:"6",value:i,onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("span",{className:"submit-comment-container",children:Object(a.jsx)("button",{onClick:function(){n(Ge(i,e.post._id)),u("")},className:"submit-comment-button",children:"Comment"})})]}):Object(a.jsxs)("div",{className:"no-user-comment-container ".concat("dark"===I?"dark-mode-border":""," "),children:[Object(a.jsx)("p",{className:"no-user-comment",children:"Log in or sign up to leave a comment"}),Object(a.jsxs)("div",{className:"auth-button-container",children:[Object(a.jsx)("button",{className:"dark"===I?"dark-mode":"",onClick:e.handleShowLogin,children:"log in"}),Object(a.jsx)("button",{onClick:e.handleShowSignup,children:"sign up"})]})]}),Object(a.jsxs)("div",{className:"card-modal-vote-container",children:[Object(a.jsx)("li",{onClick:function(){w?n(q(1,t.id)):e.handleShowLogin()},children:Object(a.jsx)(Se,{className:1===N.voteState?"vote-button-color":"".concat("dark"===I?"dark-mode-arrow":"vote-button"),src:it,alt:""})}),Object(a.jsx)("li",{className:"dark"===I?"dark-mode-font":"",children:N.voteTotal}),Object(a.jsx)("li",{onClick:function(){w?n(q(-1,t.id)):e.handleShowLogin()},children:Object(a.jsx)(xe,{className:-1===N.voteState?"vote-button-color":"".concat("dark"===I?"dark-mode-arrow":"vote-button"),src:Fe,alt:""})})]}),Object(a.jsx)("h4",{className:"comment-section-header ".concat("dark"===I?"dark-mode-font":""," "),children:"Comments"}),Object(a.jsx)("div",{className:"main-comment-container",children:_.map((function(t){return Object(a.jsx)(dt,{allComments:k,handleShowLogin:e.handleShowLogin,comment:t},t._id)}))})]}):null})]})}));n(81);var bt=function(e){var t=Object(r.useState)(!1),n=Object(b.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(!1),i=Object(b.a)(s,2),j=(i[0],i[1],Object(r.useState)(!0)),O=Object(b.a)(j,2),p=O[0],h=O[1],f=Object(r.useState)(!1),g=Object(b.a)(f,2),v=g[0],x=g[1],y=Object(l.d)((function(e){return e.currentUser.isLoggedIn})),k=Object(l.d)((function(e){return e.signup.isSignedUp})),w=Object(l.c)(),N=Object(l.d)((function(e){return e.display.display}));Object(r.useEffect)((function(){w(function(){var e=localStorage.getItem("accessToken");return function(){var t=Object(oe.a)(re.a.mark((function t(n){var a;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return","completed");case 2:return n({type:Y}),t.next=5,m()({withCredentials:!0,method:"GET",url:"/api/logged-in"});case 5:return a=t.sent,t.prev=6,n({type:I,username:a.data.username,user:a.data._id}),t.abrupt("return","completed");case 11:t.prev=11,t.t0=t.catch(6),n(ie());case 14:case"end":return t.stop()}}),t,null,[[6,11]])})));return function(e){return t.apply(this,arguments)}}()}()).then((function(e){e&&h(!1)}))}),[w]),Object(r.useEffect)((function(){y&&o(!1),k&&!y&&(x(!1),o(!0))}),[y,k]);var S=function(){o(!c)},E=function(){x(!v)},C=function(){w({type:H}),o(!1),x(!1)},T=function(e,t){w(ne(e,t))};return Object(a.jsxs)("div",{id:"scroll-wrapper",className:"app-wrapper ".concat("dark"===N?"dark-mode":""),children:[c?Object(a.jsx)(Ce,{close:C}):null,v?Object(a.jsx)(Te,{close:C}):null,Object(a.jsx)(De,{handleShowLogin:S,handleShowSignup:E}),Object(a.jsx)(d.b,{exact:!0,path:"/post/:id",render:function(e){return Object(a.jsx)(ut,Object(u.a)({handleShowLogin:S,handleShowSignup:E},e))}}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/new-post",render:function(e){return Object(a.jsx)(Ae,Object(u.a)({},e))},children:p||y?null:Object(a.jsx)(d.a,{to:"/"})}),Object(a.jsx)(d.b,{path:["/:sort","/"],render:function(t){return Object(a.jsx)(_e,Object(u.a)(Object(u.a)({handleShowLogin:S,handleShowSignup:E,handleShowNextPage:T},t),{},{test:e.posts}))},showLogin:c,showSignup:v})]})]})},jt=n(19),mt=n(47),Ot=n(48),pt=n(6),ht=n(15);function ft(e,t){var n=e.concat(t),a=new Set(n);return Object(ht.a)(a)}function gt(e,t){return Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},t.postId,Object(u.a)(Object(u.a)({},e.byId[t.postId]),{},{comments:[].concat(Object(ht.a)(e.byId[t.postId].comments),[t.savedComment._id])})))})}function vt(e,t){var n=t.postId,a=t.point,c=t.currentVoteState,r=e.byId[n];return t.commentId?e:1===c&&1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:0,voteTotal:e.byId[n].voteTotal-1})))}):0===c&&1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:1,voteTotal:e.byId[n].voteTotal+1})))}):1===c&&-1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:-1,voteTotal:e.byId[n].voteTotal-2})))}):0===c&&-1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:-1,voteTotal:e.byId[n].voteTotal-1})))}):-1===c&&-1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:0,voteTotal:e.byId[n].voteTotal+1})))}):-1===c&&1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:1,voteTotal:e.byId[n].voteTotal+2})))}):void 0}function xt(e,t){var n=t.post,a=t.id;return Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},a,n)),allIds:[].concat(Object(ht.a)(e.allIds),[a]),submitting:!1,createdPosts:Object(u.a)(Object(u.a)({},e.createdPosts),{},Object(pt.a)({},a,n)),submitted:!0,reRouteId:a})}function yt(e,t){var n=t.postId,a=t.content,c=e.byId[n];return Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},c),{},{content:a})))})}function kt(e,t){var n=e.allIds,a=t.normalizedData.result,c=new Set(a.concat(n));return Object(u.a)(Object(u.a)({},e),{},{isFetching:!1,byId:Object(u.a)(Object(u.a)({},e.byId),t.normalizedData.entities.posts),status:"succeeded",allIds:Object(ht.a)(c)})}function wt(e,t){var n=e.allIds,a=t.normalizedData.result,c=new Set(n.concat(a));return Object(u.a)(Object(u.a)({},e),{},{isFetching:!1,byId:Object(u.a)(Object(u.a)({},e.byId),t.normalizedData.entities.posts),offset:t.offset,status:"succeeded",allIds:Object(ht.a)(c)})}function Nt(e,t,n){return Object(u.a)(Object(u.a)({},e),{},{status:"completed",sortOrder:t.sort,listingOrder:Object(u.a)(Object(u.a)({},e.listingOrder),{},Object(pt.a)({},t.sort,ft(e.listingOrder[t.sort]?e.listingOrder[t.sort]:[],t.normalizedData.result)))})}function St(e,t){var n=e.allIds,a=t.normalizedData.result,c=new Set(n.concat(a));return Object(u.a)(Object(u.a)({},e),{},{isFetching:!1,byId:Object(u.a)(Object(u.a)({},e.byId),t.normalizedData.entities.posts),offset:t.offset,status:"completed",allIds:Object(ht.a)(c)})}function It(e,t){var n=t.post;return Object(u.a)(Object(u.a)({},e),{},{post:n})}function Et(e,t){var n=t.savedComment;return Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},t.savedComment._id,Object(u.a)(Object(u.a)({},e.byId[n._id]),t.savedComment)))})}function Ct(e,t){if(!t.commentId)return e;var n=t.commentId,a=t.point,c=t.currentVoteState,r=e.byId[n];return 1===c&&1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:0,voteTotal:e.byId[n].voteTotal-1})))}):0===c&&1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:1,voteTotal:e.byId[n].voteTotal+1})))}):1===c&&-1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:-1,voteTotal:e.byId[n].voteTotal-2})))}):0===c&&-1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:-1,voteTotal:e.byId[n].voteTotal-1})))}):-1===c&&-1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:0,voteTotal:e.byId[n].voteTotal+1})))}):-1===c&&1===a?Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},Object(pt.a)({},n,Object(u.a)(Object(u.a)({},r),{},{voteState:1,voteTotal:e.byId[n].voteTotal+2})))}):void 0}var Tt=function(e,t){var n;return Object(u.a)(Object(u.a)({},e),{},{byId:Object(u.a)(Object(u.a)({},e.byId),{},(n={},Object(pt.a)(n,t.commentId,Object(u.a)(Object(u.a)({},e.byId[t.commentId]),{},{comments:[].concat(Object(ht.a)(e.byId[t.commentId].comments),[t.reply._id])})),Object(pt.a)(n,t.reply._id,t.reply),n))})};var _t=Object(jt.combineReducers)({comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{byId:{},allId:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:case g:return Object.assign({},e,{byId:Object(u.a)(Object(u.a)({},e.byId),t.normalizedData.entities.comments)});case P:return Tt(e,t);case R:return Ct(e,t);case _:return Et(e,t);case L:return Object.assign({},e,{});default:return e}},display:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{display:"default"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object.assign({},e,{display:"dark"});case K:return Object.assign({},e,{display:"default"});default:return e}},currentModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{post:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return It(e,t);case C:return Object.assign({},e,{post:t.post});default:return e}},changeNewSubmissionType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{submissionType:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object.assign({},e,{submissionType:t.postType});default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,byId:{},allIds:[],offset:null,submitted:!1,err:null,createdPosts:{},submitting:!1,reRouteId:null,status:"idle",firstId:"",lastId:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object.assign({},e,{status:"idle",offset:t.offset});case D:return kt(e,t);case U:return wt(e,t);case f:return Object.assign({},e,{isFetching:!0,status:"loading"});case V:return Object.assign({},e,{byId:t.newObj,allIds:t.splicedArray,createdPosts:{}});case v:case g:return St(e,t);case R:return vt(e,t);case A:var n=e.allIds,a=n.filter((function(e){return e!==t.postId}));return Object.assign({},e,{allIds:a});case _:return gt(e,t);case T:return Object.assign({},e,{submitted:!1,submitting:!0,reRouteId:""});case G:return yt(e,t);case C:return xt(e,t);default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggingIn:!1,isLoggedIn:!1,err:null,fetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object.assign({},e,{isLoggedIn:!0,fetching:!0});case I:return Object.assign({},e,{fetching:!1});case W:return Object.assign({},e,{err:"Username or Password do not match"});case H:return Object.assign({},e,{err:null});case x:return Object.assign({},e,{isLoggingIn:!0,isLoggedIn:!1});case y:return Object.assign({},e,{isLoggingIn:!1,isLoggedIn:!0});case z:case k:return Object.assign({},e,{isLoggingIn:!1,isLoggedIn:!1});default:return e}},signup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSigningUp:!1,isSignedUp:!1,err:null,passwordError:null},t=arguments.length>1?arguments[1]:void 0,n=t.passwordError;switch(t.type){case w:return Object.assign({},e,{err:null,passwordError:null});case N:return Object.assign({},e,{isSignedUp:!0,isSigningUp:!1,err:null,passwordError:null});case F:return Object.assign({},e,{err:null});case S:return Object.assign({},e,{err:t.error,passwordError:n});default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",_id:"",err:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object.assign({},e,{username:null,_id:null});case B:return Object.assign({},e,{username:t.userInfo.username,_id:t.userInfo._id});case y:return Object.assign({},e,{username:t.username,_id:t.id});case I:return Object.assign({},e,{isLoggedIn:!0,username:t.username,_id:t.user});default:return e}},listings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sortOrder:"default",listingOrder:{},status:"idle"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Nt(e,t);case f:return t.e?Object.assign({},e,{status:"loading"}):e;case A:var n=e.listingOrder[e.sortOrder].filter((function(e){return e!==t.postId}));return Object(u.a)(Object(u.a)({},e),{},{listingOrder:Object(u.a)(Object(u.a)({},e.listingOrder),{},Object(pt.a)({},e.sortOrder,Object(ht.a)(n)))});case D:case U:case g:return Nt(e,t);default:return e}}});var Lt=function(e){var t=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),n=Object(mt.composeWithDevTools)({trace:!0});return Object(jt.createStore)(_t,t,n(Object(jt.applyMiddleware)(Ot.a)))}(),Pt=Object(c.a)();i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(l.a,{store:Lt,children:Object(a.jsx)(d.c,{history:Pt,children:Object(a.jsx)(d.b,{children:Object(a.jsx)(bt,{})})})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.af44d4ac.chunk.js.map